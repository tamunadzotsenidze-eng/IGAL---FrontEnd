#!/usr/bin/env python
"""
100 UAT Questions for IGAL Legal Assistant
Comprehensive coverage of Georgian Tax Code
"""
import requests
import re
import json
import time
from typing import Dict, List

# API Configuration
API_URL = "http://localhost:8000/api/widget/"

# 100 UAT Test Questions covering all major Georgian Tax Code topics
UAT_100_QUESTIONS = [
    # Income Tax (·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò) - Articles 77-87
    "·É†·Éê ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò·Éó ·Éò·Éë·Éî·Éí·É†·Éî·Éë·Éê ·É§·Éò·Éñ·Éò·Éô·É£·É†·Éò ·Éû·Éò·É†·Éò·É° ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò ·É°·Éê·É•·Éê·É†·Éó·Éï·Éî·Éö·Éù·É®·Éò?",
    "·É†·Éê ·Éê·É†·Éò·É° ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éù·Éë·Éò·Éî·É•·É¢·Éò?",
    "·Éï·Éò·Éú ·Éê·É†·Éò·É° ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éì·Éê·Éõ·ÉÆ·Éì·Éî·Éö·Éò?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éõ·Éù·Éê·Éú·Éí·Éê·É†·Éò·É®·Éî·Éë·Éê?",

    # VAT/DGV (·Éì·É¶·Éí) - Articles 154-192
    "·É†·Éê ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò·Éó ·Éõ·Éù·É•·Éõ·Éî·Éì·Éî·Éë·É° ·Éì·É¶·Éí ·É°·Éê·É•·Éê·É†·Éó·Éï·Éî·Éö·Éù·É®·Éò?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éì·É¶·Éí-·Éò·É° ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò?",
    "·É†·Éê ·Éó·Éê·Éú·ÉÆ·Éò·É° ·Éõ·Éò·É¶·É¨·Éî·Éï·Éò·É°·Éê·É° ·ÉÆ·Éì·Éî·Éë·Éê ·Éì·É¶·Éí-·Éò·É° ·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éê?",
    "·É†·Éù·Éì·Éò·É° ·É¨·Éê·É†·Éõ·Éù·Éò·É®·Éù·Éë·Éê ·Éì·É¶·Éí-·Éò·É° ·Éí·Éê·Éì·Éê·ÉÆ·Éì·Éò·É° ·Éï·Éê·Éö·Éì·Éî·Éë·É£·Éö·Éî·Éë·Éê?",
    "·É†·Éê ·Éê·É†·Éò·É° ·Éì·É¶·Éí-·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éò·É° ·Éù·Éë·Éò·Éî·É•·É¢·Éò?",

    # Property Tax (·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò) - Articles 193-213
    "·Éï·Éò·Éú ·Éê·É†·Éò·É° ·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éì·Éê·Éõ·ÉÆ·Éì·Éî·Éö·Éò?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò?",
    "·É†·Éê ·É•·Éù·Éú·Éî·Éë·Éê·Éñ·Éî ·Éï·É†·É™·Éî·Éö·Éì·Éî·Éë·Éê ·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò?",
    "·É†·Éù·Éì·Éò·É° ·É£·Éú·Éì·Éê ·Éí·Éê·Éì·Éê·Éò·ÉÆ·Éê·Éì·Éù·É° ·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éõ·Éù·Éê·Éú·Éí·Éê·É†·Éò·É®·Éî·Éë·Éê?",

    # Tax Rates (·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éî·Éë·Éò)
    "·É†·Éê·Éõ·Éì·Éî·Éú·Éò ·Éû·É†·Éù·É™·Éî·Éú·É¢·Éò·Éê ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò?",
    "·É†·Éê ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò·Éó ·Éò·Éë·Éî·Éí·É†·Éî·Éë·Éê ·Éõ·Éù·Éí·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò?",
    "·É†·Éê·Éõ·Éì·Éî·Éú·Éò·Éê ·Éì·É¶·Éí-·Éò·É° ·É°·É¢·Éê·Éú·Éì·Éê·É†·É¢·É£·Éö·Éò ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò?",
    "·É†·Éê ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò·Éó ·Éò·Éë·Éî·Éí·É†·Éî·Éë·Éê ·Éì·Éò·Éï·Éò·Éì·Éî·Éú·Éì·Éò?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éê·É•·É™·Éò·Éñ·Éò·É° ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò?",

    # Tax Exemptions (·Éí·Éê·Éó·Éê·Éï·Éò·É°·É£·É§·Éö·Éî·Éë·Éê)
    "·É†·Éê ·É®·Éî·Éõ·Éó·ÉÆ·Éï·Éî·Éï·Éê·É®·Éò ·Éí·Éê·Éó·Éê·Éï·Éò·É°·É£·É§·Éö·Éì·Éî·Éë·Éê ·Éû·Éò·É†·Éò ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É°·Éí·Éê·Éú?",
    "·É†·Éê ·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éê·Éö·Éò ·Éê·É†·Éò·É° ·Éí·Éê·Éó·Éê·Éï·Éò·É°·É£·É§·Éö·Éî·Éë·É£·Éö·Éò ·Éì·É¶·Éí-·É°·Éí·Éê·Éú?",
    "·Éï·Éò·Éú ·Éí·Éê·Éó·Éê·Éï·Éò·É°·É£·É§·Éö·Éì·Éî·Éë·Éê ·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É°·Éí·Éê·Éú?",
    "·É†·Éê ·Éû·Éò·É†·Éù·Éë·Éò·Éó ·É®·Éî·Éò·É´·Éö·Éî·Éë·Éê ·Éí·Éê·Éó·Éê·Éï·Éò·É°·É£·É§·Éö·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éï·Éê·Éö·Éì·Éî·Éë·É£·Éö·Éî·Éë·Éò·É°·Éí·Éê·Éú?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É®·Éî·É¶·Éê·Éï·Éê·Éó·Éî·Éë·Éò?",

    # Tax Obligations (·Éï·Éê·Éö·Éì·Éî·Éë·É£·Éö·Éî·Éë·Éî·Éë·Éò)
    "·É†·Éê ·Éï·Éê·Éö·Éì·Éî·Éë·É£·Éö·Éî·Éë·Éî·Éë·Éò ·Éê·É•·Éï·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éì·Éê·Éõ·ÉÆ·Éì·Éî·Éö·É°?",
    "·É†·Éù·Éì·Éò·É° ·É£·Éú·Éì·Éê ·É¨·Éê·É†·Éî·Éì·Éí·Éò·Éú·Éù·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éî·Éô·Éö·Éê·É†·Éê·É™·Éò·Éê?",
    "·É†·Éê ·Éï·Éê·Éì·Éê·É®·Éò·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éî·Éô·Éö·Éê·É†·Éê·É™·Éò·Éò·É° ·É¨·Éê·É†·Éì·Éí·Éî·Éú·Éê?",
    "·É†·Éê ·Éì·Éù·Éô·É£·Éõ·Éî·Éú·É¢·Éî·Éë·Éò ·É°·Éê·É≠·Éò·É†·Éù·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éò·É°·Éó·Éï·Éò·É°?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éê·É¶·É†·Éò·É™·ÉÆ·Éï·Éê?",

    # Tax Penalties (·ÉØ·Éê·É†·Éò·Éõ·Éî·Éë·Éò ·Éì·Éê ·É°·Éê·Éú·É•·É™·Éò·Éî·Éë·Éò)
    "·É†·Éê ·ÉØ·Éê·É†·Éò·Éõ·Éê ·Éì·Éê·Éî·Éô·Éò·É°·É†·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éî·Éô·Éö·Éê·É†·Éê·É™·Éò·Éò·É° ·Éê·É† ·É¨·Éê·É†·Éì·Éí·Éî·Éú·Éò·É°·Éó·Éï·Éò·É°?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É°·Éê·Éú·É•·É™·Éò·Éî·Éë·Éò ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éô·Éê·Éú·Éù·Éú·Éõ·Éì·Éî·Éë·Éö·Éù·Éë·Éò·É° ·Éì·Éê·É†·É¶·Éï·Éî·Éï·Éò·É°·Éó·Éï·Éò·É°?",
    "·É†·Éê ·Éû·Éê·É°·É£·ÉÆ·Éò·É°·Éõ·Éí·Éî·Éë·Éö·Éù·Éë·Éê ·Éì·Éê·Éì·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éì·Éê·É£·ÉÆ·Éì·Éî·Éö·Éù·Éë·Éò·É°·Éó·Éï·Éò·É°?",
    "·É†·Éê·Éõ·Éì·Éî·Éú·Éò·Éê ·ÉØ·Éê·É†·Éò·Éõ·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éï·Éê·Éö·Éò·É° ·Éì·É†·Éù·É£·Éö·Éê·Éì ·Éê·É† ·Éí·Éê·Éì·Éê·ÉÆ·Éì·Éò·É°·Éó·Éï·Éò·É°?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É°·Éò·É°·ÉÆ·Éö·Éò·É° ·É°·Éê·Éõ·Éê·É†·Éó·Éö·Éî·Éë·É†·Éò·Éï·Éò ·Éû·Éê·É°·É£·ÉÆ·Éò·É°·Éõ·Éí·Éî·Éë·Éö·Éù·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éê·Éú·Éê·É®·Éê·É£·Éö·Éò·É°·Éó·Éï·Éò·É°?",

    # Tax Deadlines (·Éï·Éê·Éì·Éî·Éë·Éò)
    "·É†·Éù·Éì·Éò·É° ·É£·Éú·Éì·Éê ·Éí·Éê·Éì·Éê·Éò·ÉÆ·Éê·Éì·Éù·É° ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò?",
    "·É†·Éê ·Éï·Éê·Éì·Éê·É®·Éò ·É£·Éú·Éì·Éê ·Éí·Éê·Éì·Éê·Éò·ÉÆ·Éê·Éì·Éù·É° ·Éì·É¶·Éí?",
    "·É†·Éù·Éì·Éò·É° ·Éê·É†·Éò·É° ·É•·Éù·Éú·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éì·Éê·ÉÆ·Éì·Éò·É° ·Éï·Éê·Éì·Éê?",
    "·É†·Éê ·Éï·Éê·Éì·Éê·É®·Éò ·É£·Éú·Éì·Éê ·É¨·Éê·É†·Éî·Éì·Éí·Éò·Éú·Éù·É° ·É¨·Éö·Éò·É£·É†·Éò ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éî·Éô·Éö·Éê·É†·Éê·É™·Éò·Éê?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·ÉÆ·Éê·Éú·Éì·Éê·Éñ·Éõ·É£·Éö·Éù·Éë·Éò·É° ·Éï·Éê·Éì·Éê?",

    # Tax Registration (·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éê)
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éê?",
    "·É†·Éê ·Éì·Éù·Éô·É£·Éõ·Éî·Éú·É¢·Éî·Éë·Éò·Éê ·É°·Éê·É≠·Éò·É†·Éù ·Éì·É¶·Éí-·Éò·É° ·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éò·É°·Éó·Éï·Éò·É°?",
    "·É†·Éê ·Éû·Éò·É†·Éù·Éë·Éî·Éë·Éò·Éó ·ÉÆ·Éì·Éî·Éë·Éê ·Éì·É¶·Éí-·Éò·É° ·Éí·Éê·Éì·Éê·Éõ·ÉÆ·Éì·Éî·Éö·Éê·Éì ·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éê?",
    "·É†·Éù·Éí·Éù·É† ·Éõ·Éù·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éò·É° ·Éí·Éê·É£·É•·Éõ·Éî·Éë·Éê?",
    "·É†·Éê ·É®·Éî·Éõ·Éó·ÉÆ·Éï·Éî·Éï·Éê·É®·Éò ·ÉÆ·Éì·Éî·Éë·Éê ·Éì·É¶·Éí-·Éò·É° ·É†·Éî·Éí·Éò·É°·É¢·É†·Éê·É™·Éò·Éò·É° ·Éí·Éê·É£·É•·Éõ·Éî·Éë·Éê?",

    # Tax Deductions (·Éí·Éê·Éõ·Éù·É•·Éï·Éò·Éó·Éï·Éî·Éë·Éò)
    "·É†·Éê ·ÉÆ·Éê·É†·ÉØ·Éî·Éë·Éò ·Éí·Éê·Éõ·Éù·Éò·É•·Éï·Éò·Éó·Éî·Éë·Éê ·É°·Éê·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éù ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éõ·Éù·Éê·Éú·Éí·Éê·É†·Éò·É®·Éî·Éë·Éò·É°·Éê·É°?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·Éì·É¶·Éí-·Éò·É° ·Éí·Éê·Éõ·Éù·É•·Éï·Éò·Éó·Éï·Éê?",
    "·É†·Éê ·Éû·Éò·É†·Éù·Éë·Éî·Éë·Éò·Éó ·É®·Éî·Éò·É´·Éö·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éí·Éê·Éõ·Éù·É•·Éï·Éò·Éó·Éï·Éê?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éô·É†·Éî·Éì·Éò·É¢·Éò·É° ·Éõ·Éî·É•·Éê·Éú·Éò·Éñ·Éõ·Éò?",
    "·É†·Éê ·Éì·Éê·Éú·Éê·ÉÆ·Éê·É†·ÉØ·Éî·Éë·Éò ·Éê·É† ·Éí·Éê·Éõ·Éù·Éò·É•·Éï·Éò·Éó·Éî·Éë·Éê?",

    # Corporate Tax (·Éõ·Éù·Éí·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò)
    "·É†·Éê ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò·Éó ·Éò·Éë·Éî·Éí·É†·Éî·Éë·Éê ·Éõ·Éù·Éí·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò?",
    "·Éï·Éò·Éú ·Éê·É†·Éò·É° ·Éõ·Éù·Éí·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éì·Éê·Éõ·ÉÆ·Éì·Éî·Éö·Éò?",
    "·É†·Éê ·Éê·É†·Éò·É° ·Éõ·Éù·Éí·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éù·Éë·Éò·Éî·É•·É¢·Éò?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·Éõ·Éù·Éí·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éí·Éê·Éõ·Éù·Éê·Éú·Éí·Éê·É†·Éò·É®·Éî·Éë·Éê?",
    "·É†·Éê ·É®·Éî·É¶·Éê·Éï·Éê·Éó·Éî·Éë·Éò·Éê ·Éõ·Éù·Éí·Éî·Éë·Éò·É° ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éñ·Éî?",

    # Withholding Tax (·É¨·Éß·Éê·É†·Éù·É°·Éó·Éê·Éú ·Éì·Éê·Éô·Éê·Éï·Éî·Éë·É£·Éö·Éò ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò)
    "·É†·Éê ·Éê·É†·Éò·É° ·É¨·Éß·Éê·É†·Éù·É°·Éó·Éê·Éú ·Éì·Éê·Éô·Éê·Éï·Éî·Éë·É£·Éö·Éò ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò?",
    "·É†·Éê ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éò·Éó ·ÉÆ·Éì·Éî·Éë·Éê ·Éì·Éò·Éï·Éò·Éì·Éî·Éú·Éì·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",
    "·É†·Éù·Éí·Éù·É† ·Éò·Éë·Éî·Éí·É†·Éî·Éë·Éê ·Éû·É†·Éù·É™·Éî·Éú·É¢·Éò (·É°·Éê·Éû·É†·Éù·É™·Éî·Éú·É¢·Éù ·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éê·Éö·Éò)?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É†·Éù·Éò·Éê·Éö·É¢·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·Éê·É†·Éê·É†·Éî·Éñ·Éò·Éì·Éî·Éú·É¢·Éò·É° ·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",

    # Tax Refunds (·Éì·Éê·Éë·É†·É£·Éú·Éî·Éë·Éê)
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·Éí·Éê·Éì·Éê·ÉÆ·Éì·Éò·Éö·Éò ·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éò·É° ·Éì·Éê·Éë·É†·É£·Éú·Éî·Éë·Éê?",
    "·É†·Éê ·Éû·Éò·É†·Éù·Éë·Éî·Éë·Éò·Éó ·É®·Éî·Éò·É´·Éö·Éî·Éë·Éê ·Éì·É¶·Éí-·Éò·É° ·Éì·Éê·Éë·É†·É£·Éú·Éî·Éë·Éê?",
    "·É†·Éê ·Éï·Éê·Éì·Éê·É®·Éò ·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éê·Éë·É†·É£·Éú·Éî·Éë·Éê?",
    "·É†·Éù·Éí·Éù·É† ·Éõ·Éù·Éò·Éó·ÉÆ·Éù·Éï·Éù·Éó ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éê·Éë·É†·É£·Éú·Éî·Éë·Éê?",
    "·É†·Éê ·Éì·Éù·Éô·É£·Éõ·Éî·Éú·É¢·Éî·Éë·Éò·Éê ·É°·Éê·É≠·Éò·É†·Éù ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éê·Éë·É†·É£·Éú·Éî·Éë·Éò·É°·Éó·Éï·Éò·É°?",

    # Tax Audits (·É®·Éî·Éõ·Éù·É¨·Éõ·Éî·Éë·Éê)
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É®·Éî·Éõ·Éù·É¨·Éõ·Éî·Éë·Éê?",
    "·É†·Éê ·É£·É§·Éö·Éî·Éë·Éî·Éë·Éò ·Éê·É•·Éï·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éù·É†·Éí·Éê·Éú·Éù·É° ·É®·Éî·Éõ·Éù·É¨·Éõ·Éî·Éë·Éò·É°·Éê·É°?",
    "·É†·Éê ·É£·É§·Éö·Éî·Éë·Éî·Éë·Éò ·Éê·É•·Éï·É° ·Éí·Éê·Éì·Éê·Éõ·ÉÆ·Éì·Éî·Éö·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É®·Éî·Éõ·Éù·É¨·Éõ·Éî·Éë·Éò·É°·Éê·É°?",
    "·É†·Éê ·Éï·Éê·Éì·Éê·É®·Éò ·Éõ·Éò·Éõ·Éì·Éò·Éú·Éê·É†·Éî·Éù·Éë·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É®·Éî·Éõ·Éù·É¨·Éõ·Éî·Éë·Éê?",
    "·É†·Éù·Éí·Éù·É† ·Éí·Éê·É°·Éê·É©·Éò·Éï·É†·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É®·Éî·Éõ·Éù·É¨·Éõ·Éî·Éë·Éò·É° ·É®·Éî·Éì·Éî·Éí·Éî·Éë·Éò?",

    # Tax Appeals (·Éí·Éê·É°·Éê·É©·Éò·Éï·É†·Éî·Éë·Éê)
    "·É†·Éù·Éí·Éù·É† ·Éí·Éê·É°·Éê·É©·Éò·Éï·É†·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éí·Éê·Éì·Éê·É¨·Éß·Éï·Éî·É¢·Éò·Éö·Éî·Éë·Éê?",
    "·É†·Éê ·Éï·Éê·Éì·Éê·É®·Éò ·É®·Éî·Éò·É´·Éö·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éê·É•·É¢·Éò·É° ·Éí·Éê·É°·Éê·É©·Éò·Éï·É†·Éî·Éë·Éê?",
    "·É°·Éê·Éì ·Éí·Éê·É°·Éê·É©·Éò·Éï·É†·Éì·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éù·É†·Éí·Éê·Éú·Éù·É° ·Éí·Éê·Éì·Éê·É¨·Éß·Éï·Éî·É¢·Éò·Éö·Éî·Éë·Éê?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éì·Éê·Éï·Éî·Éë·Éò·É° ·Éí·Éê·Éú·ÉÆ·Éò·Éö·Éï·Éò·É° ·Éû·É†·Éù·É™·Éî·Éì·É£·É†·Éê?",
    "·É†·Éê ·Éì·Éù·Éô·É£·Éõ·Éî·Éú·É¢·Éî·Éë·Éò·Éê ·É°·Éê·É≠·Éò·É†·Éù ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·Éí·Éê·É°·Éê·É©·Éò·Éï·É†·Éî·Éë·Éò·É°·Éó·Éï·Éò·É°?",

    # Special Tax Regimes (·É°·Éû·Éî·É™·Éò·Éê·Éö·É£·É†·Éò ·É†·Éî·Éü·Éò·Éõ·Éî·Éë·Éò)
    "·É†·Éê ·Éê·É†·Éò·É° ·Éõ·Éò·Éô·É†·Éù ·Éë·Éò·Éñ·Éú·Éî·É°·Éò·É° ·É°·É¢·Éê·É¢·É£·É°·Éò?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éõ·É™·Éò·É†·Éî ·Éë·Éò·Éñ·Éú·Éî·É°·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",
    "·É†·Éê ·Éê·É†·Éò·É° ·Éó·Éê·Éï·Éò·É°·É£·É§·Éê·Éö·Éò ·Éò·Éú·Éì·É£·É°·É¢·É†·Éò·É£·Éö·Éò ·Éñ·Éù·Éú·Éò·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éü·Éò·Éõ·Éò?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éï·Éò·É†·É¢·É£·Éê·Éö·É£·É†·Éò ·Éñ·Éù·Éú·Éò·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éü·Éò·Éõ·Éò?",
    "·É†·Éê ·É®·Éî·É¶·Éê·Éï·Éê·Éó·Éî·Éë·Éò·Éê ·É°·Éê·É•·Éê·É†·Éó·Éï·Éî·Éö·Éù·É° ·É°·Éê·Éî·É†·Éó·Éê·É®·Éù·É†·Éò·É°·Éù ·É°·Éê·É§·Éò·Éú·Éê·Éú·É°·Éù ·É™·Éî·Éú·É¢·É†·É®·Éò?",

    # Transfer Pricing (·É¢·É†·Éê·Éú·É°·É§·Éî·É†·É£·Éö·Éò ·É§·Éê·É°·É¨·Éê·É†·Éõ·Éù·É•·Éõ·Éú·Éê)
    "·É†·Éê ·Éê·É†·Éò·É° ·É¢·É†·Éê·Éú·É°·É§·Éî·É†·É£·Éö·Éò ·É§·Éê·É°·É¨·Éê·É†·Éõ·Éù·É•·Éõ·Éú·Éê?",
    "·É†·Éù·Éí·Éù·É† ·É†·Éî·Éí·É£·Éö·Éò·É†·Éì·Éî·Éë·Éê ·É¢·É†·Éê·Éú·É°·É§·Éî·É†·É£·Éö·Éò ·É§·Éê·É°·Éî·Éë·Éò?",
    "·É†·Éê ·Éì·Éù·Éô·É£·Éõ·Éî·Éú·É¢·Éê·É™·Éò·Éê ·É°·Éê·É≠·Éò·É†·Éù·Éê ·É¢·É†·Éê·Éú·É°·É§·Éî·É†·É£·Éö·Éò ·É§·Éê·É°·É¨·Éê·É†·Éõ·Éù·É•·Éõ·Éú·Éò·É°·Éó·Éï·Éò·É°?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·É£·É†·Éó·Éò·Éî·É†·Éó·Éì·Éê·Éô·Éê·Éï·É®·Éò·É†·Éî·Éë·É£·Éö ·Éû·Éò·É†·Éî·Éë·É° ·É®·Éù·É†·Éò·É° ·Éù·Éû·Éî·É†·Éê·É™·Éò·Éî·Éë·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",
    "·É†·Éê ·Éê·É†·Éò·É° ·Éê·É†·Éõ·Éò·É° ·Éö·Éî·Éú·Éí·Éó ·Éû·É†·Éò·Éú·É™·Éò·Éû·Éò?",

    # International Tax (·É°·Éê·Éî·É†·Éó·Éê·É®·Éù·É†·Éò·É°·Éù ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê)
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éê·É†·Éê·É†·Éî·Éñ·Éò·Éì·Éî·Éú·É¢·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê ·É°·Éê·É•·Éê·É†·Éó·Éï·Éî·Éö·Éù·É®·Éò?",
    "·É†·Éê ·Éê·É†·Éò·É° ·Éù·É†·Éõ·Éê·Éí·Éò ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éò·É° ·Éó·Éê·Éï·Éò·Éì·Éê·Éú ·Éê·É™·Éò·Éö·Éî·Éë·Éò·É° ·É®·Éî·Éó·Éê·Éú·ÉÆ·Éõ·Éî·Éë·Éê?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·Éî·É†·Éó·Éê·É®·Éù·É†·Éò·É°·Éù ·É®·Éî·Éõ·Éù·É°·Éê·Éï·Éö·Éî·Éë·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",
    "·É†·Éê ·Éê·É†·Éò·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éñ·Éò·Éì·Éî·Éú·É¢·Éù·Éë·Éê?",
    "·É†·Éù·Éí·Éù·É† ·Éí·Éê·Éú·Éò·É°·Éê·Éñ·É¶·Éï·É†·Éî·Éë·Éê ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éñ·Éò·Éì·Éî·Éú·É¢·Éò?",

    # Excise Tax (·Éê·É•·É™·Éò·Éñ·Éò)
    "·É†·Éê ·Éê·É†·Éò·É° ·Éê·É•·É™·Éò·Éñ·Éò?",
    "·É†·Éê ·É°·Éê·É•·Éù·Éú·Éî·Éö·Éñ·Éî ·Éï·É†·É™·Éî·Éö·Éì·Éî·Éë·Éê ·Éê·É•·É™·Éò·Éñ·Éò?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éê·É•·É™·Éò·Éñ·Éò·É° ·Éí·Éê·Éú·Éê·Éô·Éï·Éî·Éó·Éî·Éë·Éò?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·Éê·É•·É™·Éò·Éñ·Éò·É° ·Éí·Éê·Éì·Éê·ÉÆ·Éì·Éê?",
    "·Éï·Éò·Éú ·Éê·É†·Éò·É° ·Éê·É•·É™·Éò·Éñ·Éò·É° ·Éí·Éê·Éì·Éê·Éõ·ÉÆ·Éì·Éî·Éö·Éò?",

    # Import/Export Tax (·Éò·Éõ·Éû·Éù·É†·É¢-·Éî·É•·É°·Éû·Éù·É†·É¢·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê)
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éò·Éõ·Éû·Éù·É†·É¢·Éò·É° ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·É°·Éê·Éë·Éê·Éü·Éù ·Éì·Éê·Éë·Éî·Éí·Éï·É†·Éê?",
    "·É†·Éê ·Éê·É†·Éò·É° ·É°·Éê·Éë·Éê·Éü·Éù ·É¶·Éò·É†·Éî·Éë·É£·Éö·Éî·Éë·Éê?",
    "·É†·Éù·Éí·Éù·É†·Éò·Éê ·Éî·É•·É°·Éû·Éù·É†·É¢·Éò·É° ·É°·Éê·Éí·Éê·Éì·Éê·É°·Éê·ÉÆ·Éê·Éì·Éù ·É†·Éî·Éü·Éò·Éõ·Éò?",
    "·É†·Éù·Éí·Éù·É† ·ÉÆ·Éì·Éî·Éë·Éê ·Éò·Éõ·Éû·Éù·É†·É¢·Éò·É° ·Éì·É¶·Éí-·É° ·Éí·Éê·Éì·Éê·ÉÆ·Éì·Éê?",
]


def extract_article_numbers(text: str) -> List[str]:
    """Extract article numbers from Georgian text"""
    patterns = [
        r'(\d+)-·Éî\s+·Éõ·É£·ÉÆ·Éö',
        r'·Éõ·É£·ÉÆ·Éö·Éò\s+(\d+)',
        r'·Éõ·É£·ÉÆ·Éö·Éò·É°\s+(\d+)',
        r'(\d+)\s+·Éõ·É£·ÉÆ·Éö·Éò',
        r'·Éõ·É£·ÉÆ·Éö(?:·Éò|·Éò·É°)?\s*‚Ññ\s*(\d+)',
        r'‚Ññ\s*(\d+)\s+·Éõ·É£·ÉÆ·Éö',
    ]

    articles = []
    for pattern in patterns:
        matches = re.findall(pattern, text, re.UNICODE)
        articles.extend(matches)

    return sorted(set(articles), key=lambda x: int(x) if x.isdigit() else 0)


def test_single_query(query: str, test_num: int, session_id: str = "uat_100") -> Dict:
    """Test a single query via HTTP API"""
    payload = {
        "message": query,
        "session_id": session_id
    }

    try:
        response = requests.post(API_URL, json=payload, timeout=60)
        response.raise_for_status()
        result = response.json()

        answer = result.get('response', '')
        citations = result.get('citations', [])

        cited_articles = extract_article_numbers(answer)

        retrieved_articles = []
        for citation in citations:
            article_num = citation.get('article_number') or citation.get('clause')
            if article_num:
                retrieved_articles.append(str(article_num))
        retrieved_articles = sorted(set(retrieved_articles), key=lambda x: int(x) if x.isdigit() else 0)

        hallucinations = [art for art in cited_articles if art not in retrieved_articles]

        status = 'PASS' if not hallucinations else 'FAIL'

        # Print progress
        symbol = "‚úÖ" if status == "PASS" else "‚ùå"
        print(f"{symbol} [{test_num:3d}/100] {query[:60]}... | Cited: {len(cited_articles)} | Retrieved: {len(retrieved_articles)}", flush=True)

        return {
            'query': query,
            'answer': answer,
            'cited_articles': cited_articles,
            'retrieved_articles': retrieved_articles,
            'hallucinations': hallucinations,
            'citations': citations[:3],
            'status': status
        }

    except Exception as e:
        print(f"‚ùå [{test_num:3d}/100] ERROR: {str(e)[:50]}", flush=True)
        return {
            'query': query,
            'answer': '',
            'cited_articles': [],
            'retrieved_articles': [],
            'hallucinations': [],
            'citations': [],
            'status': 'ERROR',
            'error': str(e)
        }


def run_100_uat_tests():
    """Run all 100 UAT tests"""
    print("\n" + "="*100)
    print("üß™ IGAL LEGAL ASSISTANT - 100 COMPREHENSIVE UAT TESTS")
    print("="*100)
    print(f"\nTesting {len(UAT_100_QUESTIONS)} queries...")
    print(f"API Endpoint: {API_URL}")
    print("\nAcceptance Criteria:")
    print("  ‚úÖ Retrieves correct clauses")
    print("  ‚úÖ No hallucinated citations")
    print("  ‚úÖ Accurate and concrete answers\n")

    # Test API connectivity
    try:
        test_response = requests.get("http://localhost:8000/health/", timeout=5)
        print(f"‚úÖ API is reachable\n")
    except Exception as e:
        print(f"‚ö†Ô∏è  Warning: Could not reach API: {e}\n")

    # Run tests
    results = []
    session_id = f"uat_100_{int(time.time())}"

    start_time = time.time()

    for i, query in enumerate(UAT_100_QUESTIONS, 1):
        result = test_single_query(query, i, session_id)
        results.append(result)
        time.sleep(0.5)  # Small delay between requests

    elapsed_time = time.time() - start_time

    # Generate summary
    print("\n\n" + "="*100)
    print("üìä 100 UAT SUMMARY REPORT")
    print("="*100)

    total_tests = len(results)
    tests_passed = sum(1 for r in results if r['status'] == 'PASS')
    tests_failed = sum(1 for r in results if r['status'] == 'FAIL')
    tests_errors = sum(1 for r in results if r['status'] == 'ERROR')

    pass_rate = (tests_passed / total_tests * 100) if total_tests > 0 else 0

    print(f"\nüìà Overall Statistics:")
    print(f"   - Total Tests: {total_tests}")
    print(f"   - Tests Passed: {tests_passed} ({pass_rate:.1f}%)")
    print(f"   - Tests Failed: {tests_failed}")
    print(f"   - Tests with Errors: {tests_errors}")
    print(f"   - Total Time: {elapsed_time:.1f}s")
    print(f"   - Avg Time per Test: {elapsed_time/total_tests:.2f}s")

    if tests_failed > 0:
        print(f"\n\n‚ùå FAILED TESTS ({tests_failed}):")
        print(f"{'='*100}")
        for i, result in enumerate(results, 1):
            if result['status'] == 'FAIL':
                print(f"\n{i}. {result['query'][:80]}...")
                print(f"   Retrieved: {result['retrieved_articles']}")
                print(f"   Cited: {result['cited_articles']}")
                print(f"   ‚ö†Ô∏è  Hallucinated: {result['hallucinations']}")

    # Final verdict
    print(f"\n\n{'='*100}")
    if pass_rate == 100.0:
        print("‚úÖ 100% PASS RATE - ALL TESTS PASSED!")
        print("   System is providing accurate citations and responses.")
    elif pass_rate >= 95.0:
        print(f"‚úÖ {pass_rate:.1f}% PASS RATE - EXCELLENT!")
        print(f"   {tests_failed} tests need attention.")
    elif pass_rate >= 90.0:
        print(f"‚ö†Ô∏è  {pass_rate:.1f}% PASS RATE - GOOD")
        print(f"   {tests_failed} tests need fixing.")
    else:
        print(f"‚ùå {pass_rate:.1f}% PASS RATE - NEEDS IMPROVEMENT")
        print(f"   {tests_failed} tests failed, {tests_errors} errors.")
    print(f"{'='*100}\n")

    return results


if __name__ == '__main__':
    run_100_uat_tests()
